<!DOCTYPE html>
<html>
  <body>
    <h1>The Storage Event</h1>

    <p>
      The Storage event is triggered when there is a change in the window's
      storage area.
    </p>

    <p>
      <strong>Note:</strong> The storage event is only triggered when a window
      <strong>other than itself</strong> makes the changes.
    </p>

    <p>
      Therefore, in this example, a new window is created, and the changes is
      done in the new window.
    </p>

    <h1>The oldValue Property</h1>

    <p>
      The oldValue property belongs to the Storage Event object, and returns the
      old value of the item that was changed.
    </p>

    <button onclick="changeValue()">Change a Storage Item</button>

    <p id="demo"></p>

    <script>
      window.addEventListener("storage", myFunction);

      function myFunction(event) {
        var txt = "Key: " + event.key + "<br>";
        txt += "Old Value: " + event.oldValue + "<br>";
        txt += "New Value: " + event.newValue;
        document.getElementById("demo").innerHTML = txt;
      }

      function changeValue() {
        var x = window.open("", "myWindow", "width=200,height=100");
        x.localStorage.setItem("mytime", Date.now());
        x.close();
      }
    </script>
  </body>
</html>
